<!DOCTYPE html>
<html>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <body>
    <h2>D3.js Scatter-Plot</h2>
    <ul id="list">
      <li></li>
    </ul>
    <ul id="list2">
      <li></li>
    </ul>
    <button id="adddata" type="button">Add data</button>
    <button id="changedata" type="button">Change data</button>
    <button id="newdata" type="button">New data</button>
    <!-- <button id="removedata" type="button">Remove data</button> -->
    <svg id="myPlot" style="width: 500px; height: 500px"></svg>

    <script>
      var data = [
        [0, 10],
        [1, 20],
        [3, 30],
        [4, 25],
        [5, 15],
      ];
      var update = function (data) {
        var lists = d3.select("#list")
          .selectAll("li")
          .data(data);


          
          
          lists.enter()
          .append("li")
          .text(function (d) {
            return (
              "This is dynamically created element and the value is " + d[1]
            );
          })
          .attr("style", "color: red");


          lists.text(function (d) {
            return "This is pre-existing element and the value is " + d[1];
          })
          .attr("style", "color: blue")

          lists.exit().remove()
      };

      var update2 = function (tdata) {
        d3.select("#list2")
          .selectAll("li")
          .data(tdata)
          .join(
            function (enter) {
              return enter
                .append("li")
                .text(function (d) {
                  return (
                    "This is dynamically created element and the value is " +
                    d[1]
                  );
                })
                .attr("style", "color: red");
            },
            function (update) {
              return update.attr("style", "color: green").text(function (d) {
            return "This is pre-existing element and the value is " + d[1];
          })
            },
            function (exit) {
              return exit.remove();
            }
          )
      };

      document.getElementById("adddata").onclick = function () {
        console.log(data);
        data.splice(4, 0, [2, 12]);
        console.log(data);
        update(data);
        update2(data);
      };

      document.getElementById("changedata").onclick = function () {
        console.log(data);
        for (i in data) {
          data[i][1] = Math.floor(Math.random() * 10);
        }
        console.log(data);
        update(data);
        update2(data);
      };

      document.getElementById("newdata").onclick = function () {
        console.log(data);
        data = [
          [0, 110],
          [1, 120],
          [3, 130],
          [4, 125],
          [5, 115],
        ];
        console.log(data);
        update(data);
        update2(data);
      };

      // document.getElementById("removedata").onclick = function () {
      //   console.log(data);
      //   data =  data.slice(2)
      //   console.log(data);
      //   update(data);
      //   update2(data)
      // };

      update(data);
      update2(data);
    </script>
  </body>
</html>
